!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(()=>(()=>{"use strict";var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>J});const r=require("react");var n=t.n(r);const o=require("classnames");var i=t.n(o);const a=require("prop-types");var c=t.n(a),u=$RefreshSig$(),l=function(t){u();var e=t.register,n=t.directionStep,o=t.shiftDirectionStep,i=t.keyDownDirectionHandel,a=function(t){var e=t.direction,r=t.step,n=t.altKey,o=t.curPosition,i=o.left,a=o.right,c=o.top,u=o.bottom;return"left"===e?(n||(i-=r),a+=r):"top"===e?(n||(c-=r),u+=r):"right"===e?n?a-=r:(a-=r,i+=r):"bottom"===e&&(n?u-=r:(u-=r,c+=r)),{top:c,left:i,right:a,bottom:u}},c=function(t){var e=t.keyCode||t.which||t.charCode;if([37,38,39,40].includes(e)){var r=t.shiftKey,c=t.altKey,u=n,l=null;r&&(u=o),37===e?(l="left",t.preventDefault()):38===e?(l="top",t.preventDefault()):39===e?(l="right",t.preventDefault()):40===e&&(l="bottom",t.preventDefault()),i&&i({direction:l,step:u,altKey:c,getNewPosition:a})}};(0,r.useEffect)((function(){if(e)return console.log("我从新绑定了"),document.addEventListener("keydown",c),function(){document.removeEventListener("keydown",c)}}),[n,o,i])};u(l,"OD7bBpZva5O2jO+Puf00hKivP7c=");var s=$RefreshSig$();function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=(0,r.createContext)(),d=s((0,r.memo)(b=s((function(t){s();var e=(0,r.useRef)({Items:{}});return(0,r.useEffect)((function(){if(null!==t.defaultActive)for(var r=Object.values(e.current.Items),n=0;n<r.length;n++){var o=r[n];if(o.comid===t.defaultActive)return void o.setActive(!0)}}),[]),l({register:null!==t.keyDirection,directionStep:t.directionStep,shiftDirectionStep:t.shiftDirectionStep,keyDownDirectionHandel:function(r){for(var n=r.direction,o=r.step,i=r.altKey,a=r.getNewPosition,c=Object.values(e.current.Items),u=0;u<c.length;u++){var l=c[u],s=null;if("boolean"==typeof t.keyDirection&&!0===t.keyDirection&&(s=!0===l.activeSync.current),"string"==typeof t.keyDirection&&(s=l.comid===t.keyDirection),s){var f=l.getCurPosition(),p=a({direction:n,step:o,altKey:i,curPosition:{top:f.top,left:f.left,right:f.right,bottom:f.bottom}}),m=p.top,g=p.left,d=p.right,h=p.bottom;return void l.setPosition({top:m,left:g,right:d,bottom:h})}}}}),n().createElement(g.Provider,{value:{getDragResizeContext:function(t){return e.current.Items[t]},getTotalDragResizeContext:function(){return e.current.Items},registerDragResize:function(t,r){if(t){var n=p({},e.current).Items;n[t]=r,e.current=p(p({},e.current),{},{Items:n})}},unregisterDragResize:function(t){var r=p({},e.current).Items;delete r[t],e.current=p(p({},e.current),{},{Items:r})}}},(null==t?void 0:t.children)||"")}),"7j4F+BKq6MxocxkjdpcZSCdsl5Y=")),"7j4F+BKq6MxocxkjdpcZSCdsl5Y=");v=d,d.propTypes={defaultActive:c().string,keyDirection:(0,a.oneOfType)([c().string,c().bool,c().array]),directionStep:c().number,shiftDirectionStep:c().number},d.defaultProps={defaultActive:null,keyDirection:null,directionStep:1,shiftDirectionStep:10};const h=d;var b,v;$RefreshReg$(b,"ReactDragResizeGroup$memo"),$RefreshReg$(v,"ReactDragResizeGroup");const y=require("styled-components");var w,x,S,D=t.n(y)().div(w||(x=["\n  &.rdr {\n    position: absolute;\n    box-sizing: border-box;\n    &.active:before {\n      content: '';\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      left: 0;\n      box-sizing: border-box;\n      outline: 1px dashed #d6d6d6;\n    }\n    &.inactive .rdr-stick {\n      display: none;\n    }\n  }\n  .rdr-stick {\n    box-sizing: border-box;\n    position: absolute;\n    font-size: 1px;\n    background: #ffffff;\n    border: 1px solid #6c6c6c;\n    box-shadow: 0 0 2px #bbb;\n  }\n  .rdr-stick-tl,\n  .rdr-stick-br {\n    cursor: nwse-resize;\n  }\n  .rdr-stick-tm,\n  .rdr-stick-bm {\n    left: 50%;\n    cursor: ns-resize;\n  }\n  .rdr-stick-tr,\n  .rdr-stick-bl {\n    cursor: nesw-resize;\n  }\n  .rdr-stick-ml,\n  .rdr-stick-mr {\n    top: 50%;\n    cursor: ew-resize;\n  }\n  .rdr-stick.not-resizable {\n    display: none;\n  }\n  .content-container {\n    display: block;\n    position: relative;\n  }\n"],S||(S=x.slice(0)),w=Object.freeze(Object.defineProperties(x,{raw:{value:Object.freeze(S)}})))),R=$RefreshSig$();function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var M=function(t){R();var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null,o=null,i=(0,r.useRef)(t);if(e){var a=(0,r.useState)(t),c=O(a,2),u=c[0],l=c[1];n=u,o=l}var s=function(t){e&&o(t),i.current=t};return[n,s,i]};R(M,"Igg1ggV+KIozObWTCGiHYq2BPWs=");var j=$RefreshSig$(),z=function(t){j();var e=t.isConflictCheck,n=t.rootRef;function o(t){var e=t.replace(/[^0-9\-,]/g,"");return void 0===e&&(e=0),parseFloat(e)}return(0,r.useEffect)((function(){n.current.setAttribute("data-is-check","".concat(e))}),[]),{conflictCheck:function(t){var r=t.top,i=t.left,a=t.width,c=t.height;if(e){for(var u=n.current.parentNode.childNodes,l=0;l<u.length;l++){var s=u[l];if(void 0!==s.className&&!s.className.includes("Operation")&&null!==s.getAttribute("data-is-check")&&"false"!==s.getAttribute("data-is-check")){var f=s.offsetWidth,p=s.offsetHeight,m=o(s.style.left),g=o(s.style.top);return r>=g&&i>=m&&g+p>r&&m+f>i||r<=g&&i<m&&r+c>g&&i+a>m||i<=m&&r>=g&&i+a>m&&r<g+p||r<g&&i>m&&r+c>g&&i<m+f||r<=g&&i>=m&&r+c>g&&i<m+f||r>=g&&i<=m&&r<g+p&&i>m+f||r<=g&&i>=m&&r+c>g&&i<m+f||r>=g&&i<=m&&r<g+p&&i>m+f||i>=m&&r>=g&&i<m+f&&r<g+p||r>g&&i<=m&&i+a>m&&r<g+p||r<=g&&i>=m&&r+c>g&&i<m+f||r>=g&&i<=m&&r<g+p&&i+a>m?{type:"on",isConflict:!0}:{type:"on",isConflict:!1}}}return{type:"on",isConflict:!1}}return{type:"off"}}}};j(z,"OD7bBpZva5O2jO+Puf00hKivP7c=");var P=$RefreshSig$();function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var E=function(t){P();var e=C(M([],!1),3)[2],r=C(M(0,!1),3),n=r[1],o=r[2],i=C(M(null,!1),3),a=i[1],c=i[2];return{recordHistorySteps:function(r){var i=r.dimensionsBeforeMoveData;if(o.current<0){var a=e.current.length+o.current;e.current.splice(a),n(0)}t>0&&(e.current.length===t&&e.current.splice(0,1),e.current.push(i))},recordCurrentSteps:function(t){a(t)},getHistorySteps:function(t){if(0===t)return c.current;var r=e.current.length+t;return r>-1?e.current[r]:null},setCurStep:n,curStepSync:o,historyStepsSync:e}};P(E,"QeemOKQhQbzwN+Iz1eI7JCdDpaE=",!1,(function(){return[M,M,M]}));var X=$RefreshSig$(),Y=function(t,e){X();var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{immediate:!1},o=(0,r.useRef)(),i=(0,r.useRef)(!1);(0,r.useEffect)((function(){i.current?e(t,o.current):(i.current=!0,n.immediate&&e(t,o.current)),o.current=t}),[t])};X(Y,"eHKmwF2UFTFPwUohlHGeUyBT7AM=");const T=Y;var $=$RefreshSig$();function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||K(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(t,e)||K(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){if(t){if("string"==typeof t)return q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(t,e):void 0}}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var W={t:"top",m:"marginTop",b:"bottom"},F={l:"left",m:"marginLeft",r:"right"},G=$((0,r.memo)(U=$((0,r.forwardRef)(Q=$((function(t,e){$();var o=(0,r.useRef)(),a=(0,r.useRef)(),c=N(M(Math.random().toString(36).substr(3,10)),3)[2],u=N(M(!1,!1),3),s=u[1],f=u[2],p=N(M(!1,!1),3),m=p[1],d=p[2],h=N(M({pointerX:0,pointerY:0,left:0,right:0,top:0,bottom:0,width:0,heihgt:0},!1),3),b=h[1],v=h[2],y=N((0,r.useState)(1),2),w=y[0],x=y[1],S=N((0,r.useState)({left:{min:null,max:null},right:{min:null,max:null},top:{min:null,max:null},bottom:{min:null,max:null}}),2),R=S[0],O=S[1],k=N(M(null),2),j=k[0],P=k[1],C=N(M(null,!1),3),A=C[1],X=C[2],Y=N(M(null),3),H=Y[0],I=Y[1],K=Y[2],q=N((0,r.useState)(null),2),G=q[0],Z=q[1],Q=N(M(null),3),U=Q[0],_=Q[1],J=Q[2],V=N(M(null),3),tt=V[0],et=V[1],rt=V[2],nt=N(M(null),3),ot=nt[0],it=nt[1],at=nt[2],ct=N(M(null),3),ut=ct[0],lt=ct[1],st=ct[2],ft=N(M(null),3),pt=ft[0],mt=ft[1],gt=ft[2],dt=N(M(null),3),ht=dt[0],bt=dt[1],vt=dt[2],yt=E(t.historyStepsLength),wt=yt.recordHistorySteps,xt=yt.recordCurrentSteps,St=yt.getHistorySteps,Dt=yt.historyStepsSync,Rt=yt.setCurStep,Ot=yt.curStepSync,kt=function(e){var r=e.top,n=e.left,o=e.right,i=e.bottom;rt.current-i-r<=1||J.current-o-n<=1||!0===t.parentLimitation&&(r<0||n<0||o<0||i<0)||(lt(r),it(n),mt(o),bt(i))},Mt=function(t){var e=St(t);return null!==e?(kt({top:e.top,left:e.left,right:e.right,bottom:e.bottom}),Rt(t),{status:"success"}):{status:"last"}};(0,r.useImperativeHandle)(e,(function(){return{previousOperationStep:function(){var t=Ot.current-1;return Mt(t)},nextOperationStep:function(){if(0===Ot.current)return{status:"first"};var t=Ot.current+1;return Mt(t)},goOperationStep:function(t){return Mt(t)},historySteps:Dt}}));var jt=z({isConflictCheck:t.isConflictCheck,rootRef:a}).conflictCheck,zt=(0,r.useContext)(g);l({register:!zt&&!(null===t.keyDirection||!1===t.keyDirection),directionStep:t.directionStep,shiftDirectionStep:t.shiftDirectionStep,keyDownDirectionHandel:function(t){var e=t.direction,r=t.step,n=t.altKey,o=t.getNewPosition;if(!0===K.current){var i=o({direction:e,step:r,altKey:n,curPosition:{top:st.current,left:at.current,right:gt.current,bottom:vt.current}}),a=i.top,c=i.left,u=i.right,l=i.bottom;kt({top:a,left:c,right:u,bottom:l})}}}),T(t.w,(function(t,e){if(!f.current&&!d.current&&t!==At){var r=e-t;Ht("mr",{pageX:pt,pageY:ut+Et/2},!0),Lt({x:r,y:0}),Ft()}})),T(t.h,(function(t,e){if(!f.current&&!d.current&&t!==Et){var r=e-t;Ht("bm",{pageX:ot+At/2,pageY:ht},!0),Lt({x:0,y:r}),Ft()}})),T(t.y,(function(t,e){if(!f.current&&!d.current&&t!==ut){var r=e-t;Bt({pageX:ot,pageY:ut}),Nt({x:0,y:r}),Gt()}})),T(t.x,(function(t,e){if(!f.current&&!d.current&&t!==ot){var r=e-t;Bt({pageX:ot,pageY:ut}),Nt({x:r,y:0}),Gt()}})),T(t.z,(function(t){(t>=0||"auto"===t)&&Z(t)}),{immediate:!0}),T(t.isActive,(function(t){zt||I(t)}),{immediate:!0}),T(H,(function(t){})),T(t.parentW,(function(t){mt(t-At-ot),_(t)})),T(t.parentH,(function(t){bt(t-Et-ut),et(t)})),(0,r.useEffect)((function(){var e=a.current.parentNode,r=t.parentW?t.parentW:e.clientWidth,n=t.parentH?t.parentH:e.clientHeight,o=t.x,i=t.y;_(r),et(n),it(o),lt(i),mt(r-("auto"===t.w?e.scrollWidth:t.w)-o),bt(n-("auto"===t.h?e.scrollHeight:t.h)-i),t.dragHandle&&L(e.querySelectorAll(t.dragHandle)).forEach((function(t){t.setAttribute("data-drag-handle",c)})),t.dragCancel&&L(e.querySelectorAll(t.dragCancel)).forEach((function(t){t.setAttribute("data-drag-cancel",c)}))}),[]),(0,r.useEffect)((function(){return null==zt||zt.registerDragResize(c.current,{setActive:I,activeSync:K,comid:t.comid,getCurPosition:function(){return{left:at.current,right:gt.current,top:st.current,bottom:vt.current}},setPosition:kt}),function(){null==zt||zt.unregisterDragResize(c.current)}}),[]),(0,r.useEffect)((function(){var t=new Map([["mousemove",It],["mouseup",Wt],["mouseleave",Wt],["mousedown",Yt],["touchmove",It],["touchend",Wt],["touchcancel",Wt],["touchstart",Wt]]);return t.forEach((function(t,e){document.documentElement.addEventListener(e,t)})),function(){t.forEach((function(t,e){document.documentElement.removeEventListener(e,t)}))}}),[It,Wt,Yt]);var Pt=(0,r.useCallback)((function(e){var r=t.stickSize,n=t.parentScaleX,o=t.parentScaleY,i={width:"".concat(r/n,"px"),height:"".concat(r/o,"px")};return i[W[e[0]]]="".concat(r/n/-2,"px"),i[F[e[1]]]="".concat(r/n/-2,"px"),i}),[t.stickSize,t.parentScaleX,t.parentScaleY]),Ct=(0,r.useMemo)((function(){return{top:"".concat(ut,"px"),left:"".concat(ot,"px"),zIndex:G}}),[ut,ot,G]),At=(0,r.useMemo)((function(){return U-ot-pt}),[U,ot,pt]),Et=(0,r.useMemo)((function(){return tt-ut-ht}),[U,ut,ht]),Xt=(0,r.useMemo)((function(){return{width:"auto"===t.w.toString()?"auto":"".concat(At,"px"),height:"auto"===t.h.toString()?"auto":"".concat(Et,"px")}}),[t.w,t.h,At,Et]);function Yt(e){t.onDeselect&&t.onDeselect({comid:t.comid,ev:e}),Tt(!1)}function Tt(e){null===t.isActive&&I(e)}function $t(){var e=t.minh,r=t.minw,n=t.maxh,o=t.maxw;t.aspectRatio&&(r/e>w?e=r/w:r=w*e,null!==o?null===n?n=o*w:o/n>w?o=n/w:n=o*w:null!==n&&(o=n/w));var i=null,a=null,c=null,u=null;null!==o&&(i=ot-(o-At),a=pt-(o-At)),null!==n&&(c=ut-(n-Et),u=ht-(n-Et)),t.parentLimitation&&(i=i<0?0:i,a=a<0?0:a,c=c<0?0:c,u=u<0?0:u);var l={left:{min:i,max:ot+(At-r)},right:{min:a,max:pt+(At-r)},top:{min:c,max:ut+(Et-e)},bottom:{min:u,max:ht+(Et-e)}};if(t.aspectRatio){var s={left:{min:ot-Math.min(ut,ht)*w*2,max:ot+(Et-e)/2*w*2},right:{min:pt-Math.min(ut,ht)*w*2,max:pt+(Et-e)/2*w*2},top:{min:ut-Math.min(ot,pt)/w*2,max:ut+(At-r)/2/w*2},bottom:{min:ht-Math.min(ot,pt)/w*2,max:ht+(At-r)/2/w*2}};"m"===X.current[0]?(l.left={min:Math.max(l.left.min,s.left.min),max:Math.min(l.left.max,s.left.max)},l.right={min:Math.max(l.right.min,s.right.min),max:Math.min(l.right.max,s.right.max)}):"m"===X.current[1]&&(l.top={min:Math.max(l.top.min,s.top.min),max:Math.min(l.top.max,s.top.max)},l.bottom={min:Math.max(l.bottom.min,s.bottom.min),max:Math.min(l.bottom.max,s.bottom.max)})}return l}function Ht(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault(),t.isResizable&&K.current||n){s(!0),P(!0);var o=void 0!==r.pageX?r.pageX:r.touches[0].pageX,i=void 0!==r.pageY?r.pageY:r.touches[0].pageY;Zt({pointerX:o,pointerY:i}),A(e),O($t())}}function Bt(e){var r=e.target,n=e.button;if(!n||0===n){if(t.onClicBodyDown&&t.onClicBodyDown({comid:t.comid,ev:e}),zt){var o=zt.getTotalDragResizeContext();Object.keys(o).forEach((function(t){c!==t&&o[t].setActive(!1)})),I(!0)}else Tt(!0);P(!0),t.dragHandle&&r.getAttribute("data-drag-handle")!==c.toString()||t.dragCancel&&r.getAttribute("data-drag-cancel")===c.toString()||(void 0!==e.stopPropagation&&e.stopPropagation(),t.isDraggable&&m(!0),Zt({pointerX:void 0!==e.pageX?e.pageX:e.touches[0].pageX,pointerY:void 0!==e.pageY?e.pageY:e.touches[0].pageY}),t.parentLimitation&&O({left:{min:0,max:U-At},right:{min:0,max:U-At},top:{min:0,max:tt-Et},bottom:{min:0,max:tt-Et}}))}}function It(e){if(f.current||d.current){e.stopPropagation();var r=void 0!==e.pageX?e.pageX:e.touches[0].pageX,n=void 0!==e.pageY?e.pageY:e.touches[0].pageY,o={x:(v.current.pointerX-r)/t.parentScaleX,y:(v.current.pointerY-n)/t.parentScaleY};if(f.current&&Lt(o),d.current){if("x"===t.axis)o.y=0;else if("y"===t.axis)o.x=0;else if("none"===t.axis)return;Nt(o)}}}function Lt(e){var r=t.snapToGrid,n=t.gridY,o=t.gridX,i=v.current.top,a=v.current.bottom,c=v.current.left,u=v.current.right;switch(X.current[0]){case"b":a=v.current.bottom+e.y,r&&(a=tt-Math.round((tt-a)/n)*n);break;case"t":i=v.current.top-e.y,r&&(i=Math.round(i/n)*n)}switch(X.current[1]){case"r":u=v.current.right+e.x,r&&(u=U-Math.round((U-u)/o)*o);break;case"l":c=v.current.left-e.x,r&&(c=Math.round(c/o)*o)}var l=Kt({newLeft:c,newRight:u,newTop:i,newBottom:a});if(c=l.newLeft,u=l.newRight,i=l.newTop,a=l.newBottom,t.aspectRatio){var s=function(t){var e=t.newLeft,r=t.newRight,n=t.newTop,o=t.newBottom,i=U-e-r,a=tt-n-o;if("m"===X.current[1]){var c=a-v.current.height;e-=c*w/2,r-=c*w/2}else if("m"===X.current[0]){var u=i-v.current.width;n-=u/w/2,o-=u/w/2}else i/a>w?(i=w*a,"l"===X.current[1]?e=U-r-i:r=U-e-i):(a=i/w,"t"===X.current[0]?n=tt-o-a:o=tt-n-a);return{newLeft:e,newRight:r,newTop:n,newBottom:o}}({newLeft:c,newRight:u,newTop:i,newBottom:a});c=s.newLeft,u=s.newRight,i=s.newTop,a=s.newBottom}it(c),mt(u),lt(i),bt(a),t.onResizing&&t.onResizing({comid:t.comid,beforeMove:v.current,curMove:{top:i,left:c,right:u,bottom:a}})}function Nt(e){var r=t.gridX,n=t.gridY,o=t.snapToGrid,i=v.current.top-e.y,a=v.current.bottom+e.y,c=v.current.left-e.x,u=v.current.right+e.x;if(o){var l=!0,s=!0,f=i-Math.floor(i/n)*n,p=tt-a-Math.floor((tt-a)/n)*n,m=c-Math.floor(c/r)*r,g=U-u-Math.floor((U-u)/r)*r;f>n/2&&(f-=n),p>n/2&&(p-=n),m>r/2&&(m-=r),g>r/2&&(g-=r),Math.abs(p)<Math.abs(f)&&(l=!1),Math.abs(g)<Math.abs(m)&&(s=!1),a=tt-Et-(i-=l?f:p),u=U-At-(c-=s?m:g)}var d=Kt({newLeft:c,newRight:u,newTop:i,newBottom:a});c=d.newLeft,u=d.newRight,i=d.newTop,a=d.newBottom,it(c),mt(u),lt(i),bt(a),t.onDragging&&t.onDragging({comid:t.comid,beforeMove:v.current,curMove:{top:i,left:c,right:u,bottom:a}})}function Kt(t){var e=t.newRight,r=t.newLeft,n=t.newBottom,o=t.newTop;return{newLeft:r=qt(R.left,r),newRight:e=qt(R.right,e),newTop:o=qt(R.top,o),newBottom:n=qt(R.bottom,n)}}function qt(t,e){var r=e;return null!==t.min&&e<t.min?r=t.min:null!==t.max&&t.max<e&&(r=t.max),r}function Wt(t){if(f.current||d.current){var e=jt({top:ut,left:ot,width:At,height:Et});"on"===e.type&&!0===e.isConflict?kt({top:v.current.top,left:v.current.left,right:v.current.right,bottom:v.current.bottom}):(xt({top:ut,left:ot,right:pt,bottom:ht}),wt({dimensionsBeforeMoveData:v.current})),f.current?Ft():d.current&&Gt()}}function Ft(){s(!1),P(!1),t.onResizing&&t.onResizing({comid:t.comid,beforeMove:v.current,curMove:{top:ut,left:ut,right:ut,bottom:ut}}),t.onResizestop&&t.onResizestop({comid:t.comid,beforeMove:v.current,curMove:{top:ut,left:ut,right:ut,bottom:ut}}),b({pointerX:0,pointerY:0,left:0,right:0,top:0,bottom:0,width:0,heihgt:0}),O({left:{min:null,max:null},right:{min:null,max:null},top:{min:null,max:null},bottom:{min:null,max:null}})}function Gt(){m(!1),P(!1),t.onDragging&&t.onDragging({comid:t.comid,beforeMove:v.current,curMove:{top:ut,left:ot,right:pt,bottom:ht}}),t.onDragstop&&t.onDragstop({comid:t.comid,beforeMove:v.current,curMove:{top:ut,left:ot,right:pt,bottom:ht}}),b({pointerX:0,pointerY:0,left:0,right:0,top:0,bottom:0,width:0,heihgt:0}),O({left:{min:null,max:null},right:{min:null,max:null},top:{min:null,max:null},bottom:{min:null,max:null}})}function Zt(t){var e=t.pointerX,r=t.pointerY;b({pointerX:e,pointerY:r,left:ot,right:pt,top:ut,bottom:ht,width:At,height:Et}),x(At/Et)}return n().createElement(D,{ref:a,className:i()(["rdr",t.className,H?"active":"inactive",t.class?t.class:"",j?"Operation":""]),onMouseDown:function(t){Bt(t)},onTouchStart:function(t){Bt(t)},onTouchEnd:function(t){Wt()},style:B(B({},Ct),t.style)},n().createElement("div",{style:Xt,className:"content-container",ref:o},t.children),t.sticks.filter((function(t){return!!["tl","tm","tr","mr","br","bm","bl","ml"].includes(t)})).map((function(e){return n().createElement("div",{key:e,className:i()([t.classNameStick,"rdr-stick","rdr-stick-".concat(e),t.isResizable?"":"not-resizable"]),onMouseDown:function(t){Ht(e,t)},onTouchStart:function(t){Ht(e,t)},style:Pt(e)},t.stickSlot[e])})))}),"zBaFZaBpb5cv12g3Xl3xHqgXt0Q=",!1,(function(){return[M,M,M,M,M,M,M,M,M,M,M,M,M,E,z,T,T,T,T,T,T,T,T,T]}))),"zBaFZaBpb5cv12g3Xl3xHqgXt0Q=",!1,(function(){return[M,M,M,M,M,M,M,M,M,M,M,M,M,E,z,T,T,T,T,T,T,T,T,T]}))),"zBaFZaBpb5cv12g3Xl3xHqgXt0Q=",!1,(function(){return[M,M,M,M,M,M,M,M,M,M,M,M,M,E,z,T,T,T,T,T,T,T,T,T]}));_=G,G.propTypes={comid:c().string,stickSize:c().number,parentScaleX:c().number,parentScaleY:c().number,isActive:c().bool,isDraggable:c().bool,isResizable:c().bool,aspectRatio:c().bool,parentLimitation:c().bool,snapToGrid:c().bool,gridX:function(t){var e=t.gridX;if(!("number"==typeof e&&e>=0))return new Error("参数gridX值类型校验失败")},gridY:function(t){var e=t.gridY;if(!("number"==typeof e&&e>=0))return new Error("参数gridY值类型校验失败")},parentW:function(t){var e=t.parentW;if(!("number"==typeof e&&e>=0)&&null!==e)return new Error("参数parentW值类型校验失败")},parentH:function(t){var e=t.parentH;if(!("number"==typeof e&&e>=0)&&null!==e)return new Error("参数parentH值类型校验失败")},w:function(t){var e=t.w;if(!("string"==typeof e?"auto"===e:e>=0))return new Error("参数w值类型校验失败")},h:function(t){var e=t.h;if(!("string"==typeof e?"auto"===e:e>=0))return new Error("参数h值类型校验失败")},minw:c().number,minh:c().number,maxw:function(t){var e=t.maxw;if(!("string"==typeof e?"auto"===e:e>=0))return new Error("参数maxh值类型校验失败")},maxh:function(t){var e=t.maxh;if(!("string"==typeof e?"auto"===e:e>=0))return new Error("参数maxh值类型校验失败")},x:c().number,y:c().number,z:function(t){var e=t.z;if(!("string"==typeof e?"auto"===e:e>=0))return new Error("参数z值类型校验失败")},dragHandle:c().string,dragCancel:c().string,sticks:c().array,classNameStick:c().string,stickSlot:c().object,axis:function(t){var e=t.axis;if("string"!=typeof e||-1===["x","y","both","none"].indexOf(e))return new Error("参数axis值类型校验失败")},class:c().string,isConflictCheck:c().bool,onClicBodyDown:c().func,onDeselect:c().func,historyStepsLength:c().number,onDragging:c().func,onDragstop:c().func,onResizing:c().func,onResizestop:c().func,directionStep:c().number,shiftDirectionStep:c().number,keyDirection:c().bool},G.defaultProps={comid:null,stickSize:8,parentScaleX:1,parentScaleY:1,isActive:null,isDraggable:!0,isResizable:!0,aspectRatio:!1,parentLimitation:!1,snapToGrid:!1,gridX:50,gridY:50,parentW:null,parentH:null,w:200,h:200,minw:0,minh:0,maxw:null,maxh:null,x:0,y:0,z:"auto",dragHandle:null,dragCancel:null,sticks:["tl","tm","tr","mr","br","bm","bl","ml"],classNameStick:null,stickSlot:{},axis:"both",class:"",isConflictCheck:!1,onClicBodyDown:null,onDeselect:null,historyStepsLength:0,onDragging:null,onDragstop:null,onResizing:null,onResizestop:null,directionStep:1,shiftDirectionStep:10,keyDirection:null},G.Group=h;const Z=G;var Q,U,_;$RefreshReg$(Q,"ReactDragResize$memo$forwardRef"),$RefreshReg$(U,"ReactDragResize$memo"),$RefreshReg$(_,"ReactDragResize");const J=Z;return e})()));
//# sourceMappingURL=index.js.map